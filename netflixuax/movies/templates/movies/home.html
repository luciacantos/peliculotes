{% extends 'movies/base.html' %}

{% block title %}Inicio{% endblock %}

{% block content %}
<div style="text-align: center; margin-top: 50px; color: pink;">
    {% if user.is_authenticated %}
        <h1 style="font-size: 50px; font-family: 'Arial', sans-serif; color: pink; text-shadow: 2px 2px 5px black;">
            ¡Bienvenido, <span style="color: white; text-transform: uppercase;">{{ user.username }}</span>!
        </h1>
        <p style="font-size: 20px; font-family: 'Arial', sans-serif; margin-top: 20px; color: white;">
            Nos alegra tenerte aquí. Explora tus películas y series favoritas.
        </p>

        <!-- Sugerencias Personalizadas -->
        <h2 style="margin-top: 40px; color: pink; font-size: 30px; text-shadow: 2px 2px 5px black;">
            Sugerencias para ti
        </h2>
        <div class="carousel-container" style="position: relative; max-width: 500px; margin: 30px auto; overflow: hidden;">
            <div class="carousel" style="display: flex; transition: transform 0.5s ease-in-out;">
                {% for movie in suggestions %}
                <div class="carousel-item" style="min-width: 100%; text-align: center;">
                    <a href="{% url 'movie_detail' movie.id %}">
                        <img src="https://image.tmdb.org/t/p/w500{{ movie.poster_path }}" alt="{{ movie.title }}" style="border-radius: 8px; max-width: 100%; height: auto;">
                    </a>
                    <h3 style="color: white; font-size: 18px; margin-top: 10px;">{{ movie.title }}</h3>
                </div>
                {% empty %}
                <p style="color: white;">No tenemos sugerencias para ti en este momento. ¡Sigue explorando y calificando!</p>
                {% endfor %}
            </div>
        </div>
        <script>
            document.addEventListener('DOMContentLoaded', function () {
                const carousel = document.querySelector('.carousel');
                const items = document.querySelectorAll('.carousel-item');
                let index = 0;

                setInterval(() => {
                    index = (index + 1) % items.length;
                    carousel.style.transform = `translateX(-${index * 100}%)`;
                }, 3000);
            });
        </script>

    {% else %}
        <h1 style="font-size: 50px; font-family: 'Arial', sans-serif; color: pink; text-shadow: 2px 2px 5px black;">
            ¡Bienvenido a Peliculinchis!
        </h1>
        <p style="font-size: 20px; font-family: 'Arial', sans-serif; margin-top: 20px; color: white;">
            Por favor, <a href="{% url 'login' %}" style="color: pink; text-decoration: none;">inicia sesión</a> o 
            <a href="{% url 'register' %}" style="color: pink; text-decoration: none;">regístrate</a> para disfrutar de la experiencia completa.
        </p>

        <!-- Fila de películas aleatorias en movimiento -->
        <div class="scrolling-row" style="overflow: hidden; white-space: nowrap; margin-top: 30px;">
            <div class="movie-ticker" style="display: inline-block; animation: scroll 20s linear infinite;">
                {% for movie in random_movies %}
                    <div style="display: inline-block; margin-right: 20px; text-align: center;">
                        <a href="{% url 'movie_detail' movie.id %}">
                            <img src="https://image.tmdb.org/t/p/w200{{ movie.poster_path }}" alt="{{ movie.title }}" style="border-radius: 8px; width: 150px; height: auto;">
                        </a>
                        <p style="color: white; margin-top: 5px; font-size: 14px;">{{ movie.title }}</p>
                    </div>
                {% endfor %}
            </div>
        </div>

        <style>
            @keyframes scroll {
                from {
                    transform: translateX(100%);
                }
                to {
                    transform: translateX(-100%);
                }
            }
        </style>
    {% endif %}
</div>
{% endblock %}



